{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import{useNavigate,Link}from\"react-router-dom\";import{login}from\"../services/authService\";import{generateQR,checkQRStatus}from\"../services/qrService\";import{QRCodeCanvas}from\"qrcode.react\";import email_icon from\"../Assets/email.png\";import password_icon from\"../Assets/password.png\";import\"./Login.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const navigate=useNavigate();const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[isMobile,setIsMobile]=useState(window.innerWidth<=768);// QR Login States\nconst[qrData,setQrData]=useState({qrURL:\"\",sessionId:\"\"});const[isLoading,setIsLoading]=useState(false);const[qrError,setQrError]=useState(\"\");// Check if device is mobile - optimized\nuseEffect(()=>{const handleResize=()=>{setIsMobile(window.innerWidth<=768);};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);// Generate QR Code - with proper error handling\nconst generateQRCode=useCallback(async()=>{if(isMobile)return;try{setIsLoading(true);setQrError(\"\");console.log(\"ðŸ”„ Generating QR code...\");const data=await generateQR();if(!data.sessionId||!data.qrURL){throw new Error(\"Invalid QR data received\");}setQrData({sessionId:data.sessionId,qrURL:data.qrURL});console.log(\"âœ… QR generated successfully\");}catch(err){console.error(\"âŒ QR generation failed:\",err.message);setQrError(\"Failed to generate QR code. Please try again.\");setQrData({qrURL:\"\",sessionId:\"\"});}finally{setIsLoading(false);}},[isMobile]);useEffect(()=>{generateQRCode();},[generateQRCode]);// Polling for QR authentication - robust version\nuseEffect(()=>{if(!qrData.sessionId||isMobile)return;let pollCount=0;const maxPolls=100;// ~5 minutes at 3-second intervals\nconsole.log(\"ðŸ” Starting QR polling for session:\",qrData.sessionId);const interval=setInterval(async()=>{try{pollCount++;if(pollCount>maxPolls){console.log(\"â° QR session expired - stopping polling\");clearInterval(interval);setQrError(\"QR code expired. Please generate a new one.\");return;}const data=await checkQRStatus(qrData.sessionId);if(data.authenticated&&data.user){console.log(\"âœ… QR authentication successful!\");clearInterval(interval);// Store auth data\nlocalStorage.setItem(\"token\",data.user.token||\"QR_AUTHENTICATED\");localStorage.setItem(\"user\",JSON.stringify(data.user));// Navigate to dashboard\nnavigate(\"/dashboard\");}// Log polling status occasionally\nif(pollCount%10===0){console.log(\"\\u23F3 Still waiting for QR auth... (poll \".concat(pollCount,\")\"));}}catch(err){console.error(\"âŒ QR status check failed:\",err.message);// Don't show error for first few attempts (might be network issues)\nif(pollCount>3){setQrError(\"Connection issue. Still trying...\");}}},3000);return()=>{console.log(\"ðŸ§¹ Cleaning up QR polling\");clearInterval(interval);};},[qrData.sessionId,isMobile,navigate]);const handleLogin=async e=>{if(e)e.preventDefault();if(!email||!password){alert(\"Please enter both email and password\");return;}try{console.log(\"ðŸ” Attempting login...\");const data=await login(email,password);if(!data.token||!data.user){throw new Error(\"Invalid response from server\");}// Store auth data\nlocalStorage.setItem(\"token\",data.token);localStorage.setItem(\"user\",JSON.stringify(data.user));console.log(\"âœ… Login successful!\");navigate(\"/dashboard\");}catch(err){var _err$response,_err$response2,_err$response2$data;console.error(\"âŒ Login failed:\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);const errorMsg=((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Login failed! Check email/password.\";alert(errorMsg);}};const handleKeyPress=e=>{if(e.key==='Enter'){handleLogin();}};const refreshQRCode=()=>{console.log(\"ðŸ”„ Refreshing QR code...\");generateQRCode();};return/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-container black-theme\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-form-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Sign in to your account\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-icon\",children:/*#__PURE__*/_jsx(\"img\",{src:email_icon,alt:\"email\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email Address\",value:email,onChange:e=>setEmail(e.target.value),onKeyPress:handleKeyPress,className:\"form-input\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-icon\",children:/*#__PURE__*/_jsx(\"img\",{src:password_icon,alt:\"password\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),onKeyPress:handleKeyPress,className:\"form-input\",required:true})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",onClick:handleLogin,disabled:!email||!password,children:\"Sign In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-footer\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"signup-link\",children:\"Sign up now\"})]})})]})}),!isMobile&&/*#__PURE__*/_jsx(\"div\",{className:\"qr-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"qr-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"qr-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Quick Access\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Scan QR code with your mobile\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"qr-display\",children:isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"qr-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Generating QR code...\"})]}):qrError?/*#__PURE__*/_jsxs(\"div\",{className:\"qr-error\",children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginBottom:'10px'},children:qrError}),/*#__PURE__*/_jsx(\"button\",{onClick:refreshQRCode,className:\"btn-retry\",children:\"Retry\"})]}):qrData.qrURL?/*#__PURE__*/_jsxs(\"div\",{className:\"qr-code-container\",children:[/*#__PURE__*/_jsx(QRCodeCanvas,{value:qrData.qrURL,size:200,level:\"H\",includeMargin:true,bgColor:\"#1a1a1a\",fgColor:\"#ffffff\"}),/*#__PURE__*/_jsx(\"div\",{className:\"qr-overlay\"})]}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"qr-instructions\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"How to use:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Open camera on your phone\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Scan the QR code above\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Confirm login on your device\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Get instant access\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"qr-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-indicator \".concat(qrError?'error':qrData.qrURL?'ready':'loading')}),/*#__PURE__*/_jsx(\"span\",{children:qrError?'Error':isLoading?'Generating...':qrData.qrURL?'Ready for scanning':'Loading...'})]})]})})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","Link","login","generateQR","checkQRStatus","QRCodeCanvas","email_icon","password_icon","jsx","_jsx","jsxs","_jsxs","Login","navigate","email","setEmail","password","setPassword","isMobile","setIsMobile","window","innerWidth","qrData","setQrData","qrURL","sessionId","isLoading","setIsLoading","qrError","setQrError","handleResize","addEventListener","removeEventListener","generateQRCode","console","log","data","Error","err","error","message","pollCount","maxPolls","interval","setInterval","clearInterval","authenticated","user","localStorage","setItem","token","JSON","stringify","concat","handleLogin","e","preventDefault","alert","_err$response","_err$response2","_err$response2$data","response","errorMsg","handleKeyPress","key","refreshQRCode","className","children","src","alt","type","placeholder","value","onChange","target","onKeyPress","required","onClick","disabled","to","style","color","marginBottom","size","level","includeMargin","bgColor","fgColor"],"sources":["Z:/ProF/qr_auth/src/components/Login.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { login } from \"../services/authService\";\r\nimport { generateQR, checkQRStatus } from \"../services/qrService\";\r\nimport { QRCodeCanvas } from \"qrcode.react\";\r\nimport email_icon from \"../Assets/email.png\";\r\nimport password_icon from \"../Assets/password.png\";\r\nimport \"./Login.css\";\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\r\n  \r\n  // QR Login States\r\n  const [qrData, setQrData] = useState({ qrURL: \"\", sessionId: \"\" });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [qrError, setQrError] = useState(\"\");\r\n\r\n  // Check if device is mobile - optimized\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  // Generate QR Code - with proper error handling\r\n  const generateQRCode = useCallback(async () => {\r\n    if (isMobile) return;\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      setQrError(\"\");\r\n      console.log(\"ðŸ”„ Generating QR code...\");\r\n      \r\n      const data = await generateQR();\r\n      \r\n      if (!data.sessionId || !data.qrURL) {\r\n        throw new Error(\"Invalid QR data received\");\r\n      }\r\n      \r\n      setQrData({\r\n        sessionId: data.sessionId,\r\n        qrURL: data.qrURL\r\n      });\r\n      \r\n      console.log(\"âœ… QR generated successfully\");\r\n    } catch (err) {\r\n      console.error(\"âŒ QR generation failed:\", err.message);\r\n      setQrError(\"Failed to generate QR code. Please try again.\");\r\n      setQrData({ qrURL: \"\", sessionId: \"\" });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [isMobile]);\r\n\r\n  useEffect(() => {\r\n    generateQRCode();\r\n  }, [generateQRCode]);\r\n\r\n  // Polling for QR authentication - robust version\r\n  useEffect(() => {\r\n    if (!qrData.sessionId || isMobile) return;\r\n\r\n    let pollCount = 0;\r\n    const maxPolls = 100; // ~5 minutes at 3-second intervals\r\n    \r\n    console.log(\"ðŸ” Starting QR polling for session:\", qrData.sessionId);\r\n\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        pollCount++;\r\n        \r\n        if (pollCount > maxPolls) {\r\n          console.log(\"â° QR session expired - stopping polling\");\r\n          clearInterval(interval);\r\n          setQrError(\"QR code expired. Please generate a new one.\");\r\n          return;\r\n        }\r\n\r\n        const data = await checkQRStatus(qrData.sessionId);\r\n        \r\n        if (data.authenticated && data.user) {\r\n          console.log(\"âœ… QR authentication successful!\");\r\n          clearInterval(interval);\r\n          \r\n          // Store auth data\r\n          localStorage.setItem(\"token\", data.user.token || \"QR_AUTHENTICATED\");\r\n          localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n          \r\n          // Navigate to dashboard\r\n          navigate(\"/dashboard\");\r\n        }\r\n        \r\n        // Log polling status occasionally\r\n        if (pollCount % 10 === 0) {\r\n          console.log(`â³ Still waiting for QR auth... (poll ${pollCount})`);\r\n        }\r\n        \r\n      } catch (err) {\r\n        console.error(\"âŒ QR status check failed:\", err.message);\r\n        \r\n        // Don't show error for first few attempts (might be network issues)\r\n        if (pollCount > 3) {\r\n          setQrError(\"Connection issue. Still trying...\");\r\n        }\r\n      }\r\n    }, 3000);\r\n\r\n    return () => {\r\n      console.log(\"ðŸ§¹ Cleaning up QR polling\");\r\n      clearInterval(interval);\r\n    };\r\n  }, [qrData.sessionId, isMobile, navigate]);\r\n\r\n  const handleLogin = async (e) => {\r\n    if (e) e.preventDefault();\r\n    \r\n    if (!email || !password) {\r\n      alert(\"Please enter both email and password\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log(\"ðŸ” Attempting login...\");\r\n      const data = await login(email, password);\r\n\r\n      if (!data.token || !data.user) {\r\n        throw new Error(\"Invalid response from server\");\r\n      }\r\n\r\n      // Store auth data\r\n      localStorage.setItem(\"token\", data.token);\r\n      localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n      \r\n      console.log(\"âœ… Login successful!\");\r\n      navigate(\"/dashboard\");\r\n      \r\n    } catch (err) {\r\n      console.error(\"âŒ Login failed:\", err.response?.data || err.message);\r\n      const errorMsg = err.response?.data?.message || \"Login failed! Check email/password.\";\r\n      alert(errorMsg);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleLogin();\r\n    }\r\n  };\r\n\r\n  const refreshQRCode = () => {\r\n    console.log(\"ðŸ”„ Refreshing QR code...\");\r\n    generateQRCode();\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-page\">\r\n      <div className=\"login-container black-theme\">\r\n        <div className=\"login-content\">\r\n          {/* Regular Login Form */}\r\n          <div className=\"login-form-section\">\r\n            <div className=\"form-card\">\r\n              <div className=\"form-header\">\r\n                <h1>Welcome Back</h1>\r\n                <p>Sign in to your account</p>\r\n              </div>\r\n\r\n              <div className=\"form-inputs\">\r\n                <div className=\"input-group\">\r\n                  <div className=\"input-icon\">\r\n                    <img src={email_icon} alt=\"email\" />\r\n                  </div>\r\n                  <input\r\n                    type=\"email\"\r\n                    placeholder=\"Email Address\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    onKeyPress={handleKeyPress}\r\n                    className=\"form-input\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"input-group\">\r\n                  <div className=\"input-icon\">\r\n                    <img src={password_icon} alt=\"password\" />\r\n                  </div>\r\n                  <input\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    onKeyPress={handleKeyPress}\r\n                    className=\"form-input\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <button \r\n                className=\"login-btn\" \r\n                onClick={handleLogin}\r\n                disabled={!email || !password}\r\n              >\r\n                Sign In\r\n              </button>\r\n\r\n              <div className=\"form-footer\">\r\n                <p>\r\n                  Don't have an account? <Link to=\"/signup\" className=\"signup-link\">Sign up now</Link>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* QR Login Section - Only visible on desktop */}\r\n          {!isMobile && (\r\n            <div className=\"qr-section\">\r\n              <div className=\"qr-card\">\r\n                <div className=\"qr-header\">\r\n                  <h2>Quick Access</h2>\r\n                  <p>Scan QR code with your mobile</p>\r\n                </div>\r\n                \r\n                <div className=\"qr-display\">\r\n                  {isLoading ? (\r\n                    <div className=\"qr-loading\">\r\n                      <div className=\"loading-spinner\"></div>\r\n                      <p>Generating QR code...</p>\r\n                    </div>\r\n                  ) : qrError ? (\r\n                    <div className=\"qr-error\">\r\n                      <p style={{color: 'red', marginBottom: '10px'}}>{qrError}</p>\r\n                      <button \r\n                        onClick={refreshQRCode}\r\n                        className=\"btn-retry\"\r\n                      >\r\n                        Retry\r\n                      </button>\r\n                    </div>\r\n                  ) : qrData.qrURL ? (\r\n                    <div className=\"qr-code-container\">\r\n                      <QRCodeCanvas \r\n                        value={qrData.qrURL} \r\n                        size={200}\r\n                        level=\"H\"\r\n                        includeMargin\r\n                        bgColor=\"#1a1a1a\"\r\n                        fgColor=\"#ffffff\"\r\n                      />\r\n                      <div className=\"qr-overlay\"></div>\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n\r\n                <div className=\"qr-instructions\">\r\n                  <h4>How to use:</h4>\r\n                  <ul>\r\n                    <li>Open camera on your phone</li>\r\n                    <li>Scan the QR code above</li>\r\n                    <li>Confirm login on your device</li>\r\n                    <li>Get instant access</li>\r\n                  </ul>\r\n                </div>\r\n\r\n                <div className=\"qr-status\">\r\n                  <span className={`status-indicator ${qrError ? 'error' : qrData.qrURL ? 'ready' : 'loading'}`}></span>\r\n                  <span>\r\n                    {qrError ? 'Error' : isLoading ? 'Generating...' : qrData.qrURL ? 'Ready for scanning' : 'Loading...'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}